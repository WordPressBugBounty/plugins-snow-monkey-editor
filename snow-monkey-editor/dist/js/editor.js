(()=>{var e={558:e=>{"use strict";var t=function(e){return parseInt(e,16)};e.exports=function(e,o){var n,s,r=function(e){return"#"===e.charAt(0)?e.slice(1):e}(e),a=function(e){var o=e.g,n=e.b,s=e.a;return{r:t(e.r),g:t(o),b:t(n),a:+(t(s)/255).toFixed(2)}}({r:(s=3===(n=r).length||4===n.length)?"".concat(n.slice(0,1)).concat(n.slice(0,1)):n.slice(0,2),g:s?"".concat(n.slice(1,2)).concat(n.slice(1,2)):n.slice(2,4),b:s?"".concat(n.slice(2,3)).concat(n.slice(2,3)):n.slice(4,6),a:(s?"".concat(n.slice(3,4)).concat(n.slice(3,4)):n.slice(6,8))||"ff"});return function(e,t){var o,n=e.r,s=e.g,r=e.b,a=e.a,i=(o=t,!isNaN(parseFloat(o))&&isFinite(o)?t:a);return"rgba(".concat(n,", ").concat(s,", ").concat(r,", ").concat(i,")")}(a,o)}},919:e=>{e.exports=function(e){if("string"!=typeof e)throw new Error("color has to be type of `string`");if("#"===e.substr(0,1))return{hex:e,alpha:1};var t=e.replace(/\s+/g,""),o=/(.*?)rgb(a)??\((\d{1,3}),(\d{1,3}),(\d{1,3})(,([01]|1.0*|0??\.([0-9]{0,})))??\)/.exec(t);if(!o)throw new Error("given color ("+e+") isn't a valid rgb or rgba color");var n=parseInt(o[3],10),s=parseInt(o[4],10),r=parseInt(o[5],10),a=o[6]?/([0-9\.]+)/.exec(o[6])[0]:"1",i=(r|s<<8|n<<16|1<<24).toString(16).slice(1);return"."===a.substr(0,1)&&(a=parseFloat("0"+a)),a=parseFloat(Math.round(100*a))/100,{hex:"#"+i.toString(16),alpha:a}}},942:(e,t)=>{var o;!function(){"use strict";var n={}.hasOwnProperty;function s(){for(var e="",t=0;t<arguments.length;t++){var o=arguments[t];o&&(e=a(e,r(o)))}return e}function r(e){if("string"==typeof e||"number"==typeof e)return e;if("object"!=typeof e)return"";if(Array.isArray(e))return s.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var o in e)n.call(e,o)&&e[o]&&(t=a(t,o));return t}function a(e,t){return t?e?e+" "+t:e+t:e}e.exports?(s.default=s,e.exports=s):void 0===(o=function(){return s}.apply(t,[]))||(e.exports=o)}()}},t={};function o(n){var s=t[n];if(void 0!==s)return s.exports;var r=t[n]={exports:{}};return e[n](r,r.exports,o),r.exports}o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";var e={};o.r(e),o.d(e,{settings:()=>_});var t={};o.r(t),o.d(t,{settings:()=>B});var n={};o.r(n),o.d(n,{settings:()=>z});var s={};o.r(s),o.d(s,{settings:()=>V});var r={};o.r(r),o.d(r,{settings:()=>J});var a={};o.r(a),o.d(a,{settings:()=>ee});var i={};o.r(i),o.d(i,{settings:()=>ae});var l={};o.r(l),o.d(l,{settings:()=>be});var c={};o.r(c),o.d(c,{settings:()=>Ce});var m={};o.r(m),o.d(m,{settings:()=>je});const u=window.lodash,d=window.wp.blockEditor,g=window.wp.components,p=window.wp.richText,h=window.wp.i18n,b=window.ReactJSXRuntime,v=(0,b.jsx)("svg",{role:"img",focusable:"false",width:"20",height:"20",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",children:(0,b.jsx)("path",{d:"M13.982,16.711c-0.744,1.441 -2.248,2.428 -3.982,2.428c-1.735,0 -3.238,-0.986 -3.983,-2.428c0.909,-1.213 2.355,-2.002 3.983,-2.002c1.629,0 3.074,0.789 3.982,2.002Zm-0.748,-7.657c-0.314,2.56 1.248,2.919 1.248,5.603c0,0.467 -0.072,0.918 -0.205,1.344c-1.037,-1.203 -2.57,-1.967 -4.277,-1.967c-1.708,0 -3.24,0.764 -4.277,1.967c-0.133,-0.426 -0.205,-0.877 -0.205,-1.344c0,-2.684 1.563,-3.043 1.247,-5.603c-0.362,-2.928 -4.315,-2.465 -4.315,-5.334c0,-1.579 1.279,-2.858 2.858,-2.858c1.709,0 2.765,1.558 4.692,1.558c1.926,0 2.982,-1.558 4.691,-1.558c1.578,0 2.857,1.279 2.857,2.858c0.001,2.869 -3.952,2.406 -4.314,5.334Zm-4.677,-4.947l-0.708,0c0,0.498 -0.403,0.9 -0.901,0.9c-0.498,0 -0.901,-0.402 -0.901,-0.9l-0.708,0c0,0.889 0.72,1.609 1.609,1.609c0.889,0 1.609,-0.72 1.609,-1.609Zm0.979,7.141c0,-0.312 -0.253,-0.568 -0.566,-0.568c-0.313,0 -0.567,0.256 -0.567,0.568c0,0.312 0.254,0.566 0.567,0.566c0.313,0 0.566,-0.253 0.566,-0.566Zm2.062,0c0,-0.312 -0.254,-0.568 -0.568,-0.568c-0.312,0 -0.566,0.256 -0.566,0.568c0,0.312 0.254,0.566 0.566,0.566c0.314,0 0.568,-0.253 0.568,-0.566Zm3.062,-7.141l-0.707,0c0,0.498 -0.404,0.9 -0.9,0.9c-0.498,0 -0.902,-0.402 -0.902,-0.9l-0.707,0c0,0.889 0.721,1.609 1.609,1.609c0.886,0.001 1.607,-0.72 1.607,-1.609Z"})}),x={position:"bottom left",variant:"alternate"};(0,p.registerFormatType)("snow-monkey-editor/dropdown",{title:"buttons",tagName:"sme-dropdown",className:null,edit:()=>(0,b.jsx)(d.BlockFormatControls,{children:(0,b.jsx)("div",{className:"block-editor-format-toolbar",children:(0,b.jsxs)(g.ToolbarGroup,{children:[(0,b.jsx)(g.Slot,{name:"SnowMonkey.ToolbarControls",children:e=>0!==e.length&&(0,b.jsx)(g.ToolbarItem,{children:t=>(0,b.jsx)(g.DropdownMenu,{icon:v,label:(0,h.__)("Snow Monkey Editor Controls","snow-monkey-editor"),toggleProps:t,controls:(0,u.orderBy)(e.map((([{props:e}])=>e)),"title"),popoverProps:x})})}),["sme-font-size","sme-letter-spacing","sme-line-height","sme-text-color","sme-text-gradient","sme-bg-color","sme-highlighter","sme-badge"].map((e=>(0,b.jsx)(g.Slot,{name:`SnowMonkey.ToolbarControls.${e}`},e)))]})})})});const C=e=>{if(!e)return;const{name:t,settings:o}=e;(0,p.registerFormatType)(t,o)},y=window.wp.data,f=window.wp.element,k=window.wp.keycodes;function w({name:e,shortcutType:t,shortcutCharacter:o,...n}){let s,r="SnowMonkey.ToolbarControls";return e&&(r+=`.${e}`),t&&o&&(s=k.displayShortcut[t](o)),(0,b.jsx)(g.Fill,{name:r,children:(0,b.jsx)(g.ToolbarButton,{...n,shortcut:s})})}const j=(0,h.__)("Remove formatting","snow-monkey-editor"),_={name:"snow-monkey-editor/remove-fomatting",title:j,tagName:"span",className:"sme-remove-fomatting",edit:({value:e,onChange:t})=>{const o=(0,y.useSelect)((e=>e("core/rich-text").getFormatTypes()),[]),n=(0,f.useCallback)((()=>{if(0<o.length){let n=e;o.forEach((e=>{n=(0,p.removeFormat)(n,e.name)})),t({...n})}}),[e,o]);return(0,b.jsx)(w,{icon:"editor-removeformatting",title:j,onClick:n})}};var S=o(942),R=o.n(S);const N=({name:e,value:t,onChange:o,onReset:n})=>{const[s]=(0,d.useSettings)("typography.fontSizes"),r=(0,f.useMemo)((()=>function(e,t,o){const n=(0,p.getActiveFormat)(t,e);if(!n)return;const s=n.attributes.style;if(s)return s.replace(new RegExp("^font-size:\\s*"),"");const r=n.attributes.class;if(r){let e=r.replace(/.*has-([^\s]*)-font-size.*/,"$1"),t=(0,u.find)(o,{slug:e});if(!t&&(e=e.replace(/(\d)-([^\d])/,"$1$2",e),t=(0,u.find)(o,{slug:e}),!t))return;return t.size}}(e,t,s)),[e,t]);return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(d.FontSizePicker,{__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,value:r,onChange:o,fontSizes:s}),(0,b.jsx)(g.Button,{disabled:void 0===t,variant:"secondary",size:"small",onClick:n,children:(0,h.__)("Reset")})]})},F=(0,g.withSpokenMessages)((({name:e,value:t,onChange:o,onClose:n,onReset:s,contentRef:r,settings:a})=>{const i=(0,p.useAnchor)({editableContentElement:r.current,settings:a}),l=(0,d.useCachedTruthy)(i.getBoundingClientRect());return i.getBoundingClientRect=()=>l,(0,b.jsx)(g.Popover,{anchor:i,onClose:n,className:"sme-popover sme-popover--inline-font-size components-inline-color-popover",children:(0,b.jsx)("fieldset",{children:(0,b.jsx)(N,{name:e,value:t,onChange:o,onReset:s})})})})),A="snow-monkey-editor/font-size",M=(0,h.__)("Font size","snow-monkey-editor"),B={name:A,title:M,tagName:"span",className:"sme-font-size",attributes:{style:"style",class:"class"},edit:e=>{const{value:t,onChange:o,isActive:n,activeAttributes:s,contentRef:r}=e,[a]=(0,d.useSettings)("typography.fontSizes"),[i,l]=(0,f.useState)(!1);return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(w,{name:n?"sme-font-size":void 0,title:M,className:R()("sme-toolbar-button",{"is-pressed":!!n}),onClick:()=>{l(!i)},icon:(0,b.jsx)(g.Icon,{icon:"editor-textcolor"})},n?"sme-font-size":"sme-font-size-not-active"),i&&(0,b.jsx)(F,{name:A,activeAttributes:s,value:t,onClose:()=>l(!1),onReset:()=>{l(!1),o((0,p.removeFormat)(t,A))},onChange:e=>{if(e){let n;if((0,u.isString)(e)||a[0]&&(0,u.isString)(a[0].size))n=e;else{if(!(0,u.isNumber)(e))return;n=`${e}px`}const s=(0,u.find)(a,{size:e});o((0,p.applyFormat)(t,{type:A,attributes:s?{class:(0,d.getFontSizeClass)(s.slug)}:{style:`font-size: ${n}`}}))}else o((0,p.removeFormat)(t,A))},contentRef:r,settings:B})]})}},O=({name:e,title:t,value:o,onChange:n,onReset:s})=>{const r=(0,f.useMemo)((()=>function(e,t){const o=(0,p.getActiveFormat)(t,e);if(!o)return;const n=o.attributes?.style;return n?parseFloat(n.replace(new RegExp("^letter-spacing:\\s*"),"").replace("rem","")):void 0}(e,o)),[e,o]);return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(g.RangeControl,{__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,label:t,value:r,onChange:n,min:"0",max:"2",step:"0.1",initialPosition:void 0}),(0,b.jsx)(g.Button,{disabled:void 0===o,variant:"secondary",isSmall:!0,onClick:s,children:(0,h.__)("Reset")})]})},T=(0,g.withSpokenMessages)((({name:e,title:t,value:o,onChange:n,onClose:s,onReset:r,contentRef:a,settings:i})=>{const l=(0,p.useAnchor)({editableContentElement:a.current,settings:i}),c=(0,d.useCachedTruthy)(l.getBoundingClientRect());return l.getBoundingClientRect=()=>c,(0,b.jsx)(g.Popover,{anchor:l,onClose:s,className:"sme-popover sme-popover--inline-letter-spacing components-inline-color-popover",children:(0,b.jsx)("fieldset",{children:(0,b.jsx)(O,{name:e,title:t,value:o,onChange:n,onReset:r})})})})),P="snow-monkey-editor/letter-spacing",E=(0,h.__)("Letter spacing","snow-monkey-editor"),z={name:P,title:E,tagName:"span",className:"sme-letter-spacing",attributes:{style:"style"},edit:e=>{const{value:t,onChange:o,isActive:n,activeAttributes:s,contentRef:r}=e,[a,i]=(0,f.useState)(!1);return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(w,{name:n?"sme-letter-spacing":void 0,title:E,className:R()("sme-toolbar-button",{"is-pressed":!!n}),onClick:()=>{i(!a)},icon:(0,b.jsx)(g.Icon,{icon:"controls-pause"})},n?"sme-letter-spacing":"sme-letter-spacing-not-active"),a&&(0,b.jsx)(T,{name:P,title:E,activeAttributes:s,value:t,onClose:()=>{i(!1)},onReset:()=>{i(!1),o((0,p.removeFormat)(t,P))},onChange:e=>{o((0,p.applyFormat)(t,{type:P,attributes:{style:`letter-spacing: ${e}rem`}}))},contentRef:r,settings:z})]})}},I=({name:e,title:t,value:o,onChange:n,onReset:s})=>{const r=(0,f.useMemo)((()=>function(e,t){const o=(0,p.getActiveFormat)(t,e);if(!o)return;const n=o.attributes.style;return n?parseFloat(n.replace(new RegExp("^line-height:\\s*"),"")):void 0}(e,o)),[e,o]);return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(g.RangeControl,{__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,label:t,value:r,onChange:n,min:"0",max:"5",step:"0.1",initialPosition:void 0}),(0,b.jsx)(g.Button,{disabled:void 0===o,variant:"secondary",isSmall:!0,onClick:s,children:(0,h.__)("Reset")})]})},$=(0,g.withSpokenMessages)((({name:e,title:t,value:o,onChange:n,onClose:s,onReset:r,contentRef:a,settings:i})=>{const l=(0,p.useAnchor)({editableContentElement:a.current,settings:i}),c=(0,d.useCachedTruthy)(l.getBoundingClientRect());return l.getBoundingClientRect=()=>c,(0,b.jsx)(g.Popover,{anchor:l,onClose:s,className:"sme-popover sme-popover--inline-line-height components-inline-color-popover",children:(0,b.jsx)("fieldset",{children:(0,b.jsx)(I,{name:e,title:t,value:o,onChange:n,onReset:r})})})})),H="snow-monkey-editor/line-height",L=(0,h.__)("Line height","snow-monkey-editor"),V={name:H,title:L,tagName:"span",className:"sme-line-height",attributes:{style:"style"},edit:e=>{const{value:t,onChange:o,isActive:n,activeAttributes:s,contentRef:r}=e,[a,i]=(0,f.useState)(!1);return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(w,{name:n?"sme-line-height":void 0,title:L,className:R()("sme-toolbar-button",{"is-pressed":!!n}),onClick:()=>{i(!a)},icon:(0,b.jsx)(g.Icon,{icon:"editor-insertmore"})},n?"sme-line-height":"sme-line-height-not-active"),a&&(0,b.jsx)($,{name:H,title:L,activeAttributes:s,value:t,onClose:()=>{i(!1)},onReset:()=>{i(!1),o((0,p.removeFormat)(t,H))},onChange:e=>{o((0,p.applyFormat)(t,{type:H,attributes:{style:`line-height: ${e}`}}))},contentRef:r,settings:V})]})}};function G(e,t,o){const n=(0,p.getActiveFormat)(t,e);if(!n)return;const s=n.attributes.style;if(s)return s.replace(new RegExp("^color:\\s*"),"");const r=n.attributes.class;if(r){const e=r.replace(/.*has-([^\s]*)-color.*/,"$1");return(0,d.getColorObjectByAttributeValues)(o,e).color}}const Z=({name:e,value:t,onChange:o})=>{const[n,s,r]=(0,d.useSettings)("color.palette.custom","color.palette.theme","color.palette.default"),a=(0,f.useMemo)((()=>[...n||[],...s||[],...r||[]]),[n,s,r]),i=(0,f.useMemo)((()=>G(e,t,a)),[e,t,a]);return(0,b.jsx)(d.__experimentalColorGradientControl,{label:(0,h.__)("Color","snow-monkey-editor"),colorValue:i,onColorChange:o,...(0,d.__experimentalUseMultipleOriginColorsAndGradients)(),__experimentalHasMultipleOrigins:!0,__experimentalIsRenderedInSidebar:!0})},D=(0,g.withSpokenMessages)((({name:e,value:t,onChange:o,onClose:n,contentRef:s,settings:r})=>{const a=(0,p.useAnchor)({editableContentElement:s.current,settings:r}),i=(0,d.useCachedTruthy)(a.getBoundingClientRect());return a.getBoundingClientRect=()=>i,(0,b.jsx)(g.Popover,{anchor:a,value:t,onClose:n,className:"sme-popover sme-popover--inline-color components-inline-color-popover",children:(0,b.jsx)(Z,{name:e,value:t,onChange:o})})})),U="snow-monkey-editor/text-color",q=(0,h.__)("Text color","snow-monkey-editor"),J={name:U,title:q,tagName:"span",className:"sme-text-color",attributes:{style:"style",class:"class"},edit:e=>{const{value:t,onChange:o,isActive:n,activeAttributes:s,contentRef:r}=e,[a,i,l]=(0,d.useSettings)("color.palette.custom","color.palette.theme","color.palette.default"),c=(0,f.useMemo)((()=>[...a||[],...i||[],...l||[]]),[a,i,l]),[m,u]=(0,f.useState)(!1),h=(0,f.useMemo)((()=>G(U,t,c)),[t,c]);return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(w,{name:n?"sme-text-color":void 0,title:q,style:{color:h},className:R()("sme-toolbar-button",{"is-pressed":!!n}),onClick:()=>{u(!m)},icon:(0,b.jsx)(g.Icon,{icon:"edit"})},n?"sme-text-color":"sme-text-color-not-active"),m&&(0,b.jsx)(D,{name:U,activeAttributes:s,value:t,onClose:()=>u(!1),onChange:e=>{if(e){const n=(0,d.getColorObjectByColorValue)(c,e);o((0,p.applyFormat)(t,{type:U,attributes:n?{class:(0,d.getColorClassName)("color",n.slug)}:{style:`color: ${e}`}}))}else o((0,p.removeFormat)(t,U)),u(!1)},contentRef:r,settings:J})]})}};function X(e,t,o){const n=(0,p.getActiveFormat)(t,e);if(!n)return;const s=n.attributes?.style;if(s)return s.replace(new RegExp("^background-image:\\s*"),"");const r=n.attributes?.class;if(r){let e=r.replace(/.*has-([^\s]*)-gradient-background.*/,"$1"),t=(0,u.find)(o,{slug:e});if(!t&&(e=e.replace(/(\d)-([^\d])/,"$1$2",e),t=(0,u.find)(o,{slug:e}),!t))return;return t.gradient}}const K=({name:e,value:t,onChange:o})=>{const[n,s,r]=(0,d.useSettings)("color.gradients.custom","color.gradients.theme","color.gradients.default"),a=(0,f.useMemo)((()=>[...n||[],...s||[],...r||[]]),[n,s,r]),i=(0,f.useMemo)((()=>X(e,t,a)),[e,t,a]);return(0,b.jsx)(d.__experimentalColorGradientControl,{label:(0,h.__)("Color","snow-monkey-editor"),gradientValue:i,onGradientChange:o,...(0,d.__experimentalUseMultipleOriginColorsAndGradients)(),__experimentalHasMultipleOrigins:!0,__experimentalIsRenderedInSidebar:!0})},Q=(0,g.withSpokenMessages)((({name:e,value:t,onChange:o,onClose:n,contentRef:s,settings:r})=>{const a=(0,p.useAnchor)({editableContentElement:s.current,settings:r}),i=(0,d.useCachedTruthy)(a.getBoundingClientRect());return a.getBoundingClientRect=()=>i,(0,b.jsx)(g.Popover,{anchor:a,onClose:n,className:"sme-popover sme-popover--inline-gradient components-inline-gradient-popover",children:(0,b.jsx)(K,{name:e,value:t,onChange:o})})})),W="snow-monkey-editor/text-gradient",Y=(0,h.__)("Text gradient","snow-monkey-editor"),ee={name:W,title:Y,tagName:"span",className:"sme-text-gradient",attributes:{style:"style",class:"class"},edit:e=>{const{value:t,onChange:o,isActive:n,activeAttributes:s,contentRef:r}=e,[a,i,l]=(0,d.useSettings)("color.gradients.custom","color.gradients.theme","color.gradients.default"),c=(0,f.useMemo)((()=>[...a||[],...i||[],...l||[]]),[a,i,l]),[m,u]=(0,f.useState)(!1),h=(0,f.useMemo)((()=>X(W,t,c)),[t,c]);return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(w,{name:n?"sme-text-gradient":void 0,title:Y,style:{"--sme--gradient":h},className:R()("sme-toolbar-button","sme-toolbar-button--text-gradient",{"is-pressed":!!n}),onClick:()=>{u(!m)},icon:(0,b.jsx)(g.Icon,{icon:"edit"})},n?"sme-text-gradient":"sme-text-gradient-not-active"),m&&(0,b.jsx)(Q,{name:W,activeAttributes:s,value:t,onClose:()=>u(!1),onChange:e=>{if(e){const n=(0,d.getGradientSlugByValue)(c,e);o((0,p.applyFormat)(t,{type:W,attributes:n?{class:(0,d.__experimentalGetGradientClass)(n)}:{style:`background-image: ${e}`}}))}else o((0,p.removeFormat)(t,W)),u(!1)},contentRef:r,settings:ee})]})}};function te(e,t,o){const n=(0,p.getActiveFormat)(t,e);if(!n)return;const s=n.attributes.style;if(s)return s.replace(new RegExp("^background-color:\\s*"),"");const r=n.attributes.class;if(r){const e=r.replace(/.*has-([^\s]*)-background-color.*/,"$1");return(0,d.getColorObjectByAttributeValues)(o,e).color}}const oe=({name:e,value:t,onChange:o})=>{const[n,s,r]=(0,d.useSettings)("color.palette.custom","color.palette.theme","color.palette.default"),a=(0,f.useMemo)((()=>[...n||[],...s||[],...r||[]]),[n,s,r]),i=(0,f.useMemo)((()=>te(e,t,a)),[e,t,a]);return(0,b.jsx)(d.__experimentalColorGradientControl,{label:(0,h.__)("Color","snow-monkey-editor"),colorValue:i,onColorChange:o,...(0,d.__experimentalUseMultipleOriginColorsAndGradients)(),__experimentalHasMultipleOrigins:!0,__experimentalIsRenderedInSidebar:!0})},ne=(0,g.withSpokenMessages)((({name:e,value:t,onChange:o,onClose:n,contentRef:s,settings:r})=>{const a=(0,p.useAnchor)({editableContentElement:s.current,settings:r}),i=(0,d.useCachedTruthy)(a.getBoundingClientRect());return a.getBoundingClientRect=()=>i,(0,b.jsx)(g.Popover,{anchor:a,onClose:n,className:"sme-popover sme-popover--inline-background-color components-inline-color-popover",children:(0,b.jsx)(oe,{name:e,value:t,onChange:o})})})),se="snow-monkey-editor/bg-color",re=(0,h.__)("Background color","snow-monkey-editor"),ae={name:se,title:re,tagName:"span",className:"sme-bg-color",attributes:{style:"style",class:"class"},edit:e=>{const{value:t,onChange:o,isActive:n,activeAttributes:s,contentRef:r}=e,[a,i,l]=(0,d.useSettings)("color.palette.custom","color.palette.theme","color.palette.default"),c=(0,f.useMemo)((()=>[...a||[],...i||[],...l||[]]),[a,i,l]),[m,u]=(0,f.useState)(!1),h=(0,f.useMemo)((()=>te(se,t,c)),[t,c]);return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(w,{name:n?"sme-bg-color":void 0,title:re,style:{color:h},className:R()("sme-toolbar-button",{"is-pressed":!!n}),onClick:()=>{u(!m)},icon:(0,b.jsx)(g.Icon,{icon:"tag"})},n?"sme-bg-color":"sme-bg-color-not-active"),m&&(0,b.jsx)(ne,{name:se,activeAttributes:s,value:t,onClose:()=>u(!1),onChange:e=>{if(e){const n=(0,d.getColorObjectByColorValue)(c,e);o((0,p.applyFormat)(t,{type:se,attributes:n?{class:(0,d.getColorClassName)("background-color",n.slug)}:{style:`background-color: ${e}`}}))}else o((0,p.removeFormat)(t,se)),u(!1)},contentRef:r,settings:ae})]})}};var ie=o(558),le=o.n(ie),ce=o(919),me=o.n(ce);function ue(e,t){const o=(0,p.getActiveFormat)(t,e);if(!o)return;const n=o.attributes.style;if(!n)return;const s=n.match(/(#[0-9A-F]{3,6}) /i);if(s)return s;const r=n.match(/,\s*?(rgba?\([^)]+\)) /i);return r?function(e){if(!e||4===e.length)return e;const t=e.match(/^#([0-9A-F])\1([0-9A-F])\1([0-9A-F])\1$/i);return t?`#${t[1].slice(0,1)}${t[2].slice(0,1)}${t[3].slice(0,1)}`:e}(me()(r[1]).hex):void 0}const de=({name:e,value:t,onChange:o})=>{const[n,s,r]=(0,d.useSettings)("color.palette.custom","color.palette.theme","color.palette.default"),a=(0,f.useMemo)((()=>[...n||[],...s||[],...r||[]]),[n,s,r]),i=(0,f.useMemo)((()=>ue(e,t)),[e,t,a]);return(0,b.jsx)(d.__experimentalColorGradientControl,{label:(0,h.__)("Color","snow-monkey-editor"),colorValue:i,onColorChange:o,...(0,d.__experimentalUseMultipleOriginColorsAndGradients)(),__experimentalHasMultipleOrigins:!0,__experimentalIsRenderedInSidebar:!0})},ge=(0,g.withSpokenMessages)((({name:e,value:t,onChange:o,onClose:n,contentRef:s,settings:r})=>{const a=(0,p.useAnchor)({editableContentElement:s.current,settings:r}),i=(0,d.useCachedTruthy)(a.getBoundingClientRect());return a.getBoundingClientRect=()=>i,(0,b.jsx)(g.Popover,{anchor:a,onClose:n,className:"sme-popover sme-popover--inline-color components-inline-color-popover",children:(0,b.jsx)(de,{name:e,value:t,onChange:o})})})),pe="snow-monkey-editor/highlighter",he=(0,h.__)("Highlighter","snow-monkey-editor"),be={name:pe,title:he,tagName:"span",className:"sme-highlighter",attributes:{style:"style"},edit:e=>{const{value:t,onChange:o,isActive:n,activeAttributes:s,contentRef:r}=e,[a,i,l]=(0,d.useSettings)("color.palette.custom","color.palette.theme","color.palette.default"),c=(0,f.useMemo)((()=>[...a||[],...i||[],...l||[]]),[a,i,l]),[m,u]=(0,f.useState)(!1),h=(0,f.useMemo)((()=>ue(pe,t)),[t,c]);return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(w,{name:n?"sme-highlighter":void 0,title:he,style:{color:h},className:R()("sme-toolbar-button",{"is-pressed":!!n}),onClick:()=>{u(!m)},icon:(0,b.jsx)(g.Icon,{icon:"tag"})},n?"sme-highlighter":"sme-highlighter-not-active"),m&&(0,b.jsx)(ge,{name:pe,activeAttributes:s,value:t,onClose:()=>u(!1),onChange:e=>{e?(e.match(/^#/)&&(e=le()(e,.5)),o((0,p.applyFormat)(t,{type:pe,attributes:{style:`background-image: linear-gradient(transparent 60%, ${e} 60%)`}}))):(o((0,p.removeFormat)(t,pe)),u(!1))},contentRef:r,settings:be})]})}},ve="snow-monkey-editor/badge",xe=(0,h.__)("Badge","snow-monkey-editor"),Ce={name:ve,title:xe,tagName:"span",className:"sme-badge",attributes:{style:"style",class:"class"},edit:e=>{const{value:t,onChange:o,isActive:n,activeAttributes:s,contentRef:r}=e,[a,i,l]=(0,d.useSettings)("color.palette.custom","color.palette.theme","color.palette.default"),c=(0,f.useMemo)((()=>[...a||[],...i||[],...l||[]]),[a,i,l]),[m,u]=(0,f.useState)(!1),h=(0,f.useMemo)((()=>te(ve,t,c)),[t,c]);return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(w,{name:n?"sme-badge":void 0,title:xe,style:{color:h},className:R()("sme-toolbar-button",{"is-pressed":!!n}),onClick:()=>{u(!m)},icon:(0,b.jsx)(g.Icon,{icon:"tag"})},n?"sme-badge":"sme-badge-not-active"),m&&(0,b.jsx)(ne,{name:ve,activeAttributes:s,value:t,onClose:()=>u(!1),onChange:e=>{if(e){const n=(0,d.getColorObjectByColorValue)(c,e);o((0,p.applyFormat)(t,{type:ve,attributes:n?{class:(0,d.getColorClassName)("background-color",n.slug)}:{style:`background-color: ${e}`}}))}else o((0,p.removeFormat)(t,ve)),u(!1)},contentRef:r,settings:Ce})]})}},ye="snow-monkey-editor/br",fe=(0,h.__)("Line break per screen size","snow-monkey-editor"),ke={type:ye,innerHTML:"<br />"};function we({value:e,onChange:t,activeObjectAttributes:o,contentRef:n}){const s=e.replacements.slice()?.[e.start]?.attributes?.class,[r,a]=(0,f.useState)(!!s?.match(/sme-br--disable:desktop/)),[i,l]=(0,f.useState)(!!s?.match(/sme-br--disable:tablet/)),[c,m]=(0,f.useState)(!!s?.match(/sme-br--disable:mobile/)),u=(0,p.useAnchor)({editableContentElement:n.current,settings:je}),d=(0,f.useCallback)((n=>{a(!n);const s=e.replacements.slice();s[e.start]={...ke,attributes:{...o,class:R()({"sme-br--disable:desktop":!n,"sme-br--disable:tablet":i,"sme-br--disable:mobile":c})}},t({...e,replacements:s})}),[i,c]),v=(0,f.useCallback)((n=>{l(!n);const s=e.replacements.slice();s[e.start]={...ke,attributes:{...o,class:R()({"sme-br--disable:desktop":r,"sme-br--disable:tablet":!n,"sme-br--disable:mobile":c})}},t({...e,replacements:s})}),[r,c]),x=(0,f.useCallback)((n=>{m(!n);const s=e.replacements.slice();s[e.start]={...ke,attributes:{...o,class:R()({"sme-br--disable:desktop":r,"sme-br--disable:tablet":i,"sme-br--disable:mobile":!n})}},t({...e,replacements:s})}),[r,i]);return(0,b.jsx)(g.Popover,{placement:"bottom",shift:!0,focusOnMount:!1,anchor:u,className:"sme-popover sme-popover--inline-br",children:(0,b.jsxs)("div",{style:{width:"260px"},children:[(0,b.jsx)(g.ToggleControl,{__nextHasNoMarginBottom:!0,label:(0,h.__)("Line breaks when on the desktop","snow-monkey-editor"),checked:!r,onChange:d,disabled:i&&c}),(0,b.jsx)(g.ToggleControl,{__nextHasNoMarginBottom:!0,label:(0,h.__)("Line breaks when on the tablet","snow-monkey-editor"),checked:!i,onChange:v,disabled:r&&c}),(0,b.jsx)(g.ToggleControl,{__nextHasNoMarginBottom:!0,label:(0,h.__)("Line breaks when on the mobile","snow-monkey-editor"),checked:!c,onChange:x,disabled:r&&i})]})})}const je={name:ye,title:fe,tagName:"span",className:"sme-br",attributes:{class:"class"},interactive:!0,contentEditable:!1,edit:function({value:e,onChange:t,onFocus:o,isObjectActive:n,activeObjectAttributes:s,contentRef:r}){return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(w,{icon:(0,b.jsx)("span",{className:"dashicon",children:(0,b.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,b.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M18.0224 5.25C18.4366 5.25 18.7724 5.58579 18.7724 6V15C18.7724 15.4142 18.4366 15.75 18.0224 15.75L18.0112 15.7499L18 15.75H10.0784V19L4.5 14.8349L10.0784 10.6699V14.25H17.2724V6C17.2724 5.58579 17.6082 5.25 18.0224 5.25Z",fill:"currentColor"})})}),title:fe,onClick:()=>{const n=(0,p.insertObject)(e,{...ke},e.end,e.end);n.start=n.end-1,t(n),o()},isActive:n}),n&&(0,b.jsx)(we,{value:e,onChange:t,activeObjectAttributes:s,contentRef:r})]})}};C(e),C(t),C(n),C(s),C(r),C(a),C(i),C(l),C(c),C(m);const _e=window.wp.compose,Se=window.wp.hooks;(0,Se.addFilter)("editor.BlockListBlock","snow-monkey-editor/ordered-list/orderd-styles",(0,_e.createHigherOrderComponent)((e=>t=>{const{attributes:o,name:n}=t?.block,{start:s,reversed:r,ordered:a,className:i}=o;return"core/list"!==n?(0,b.jsx)(e,{...t}):(i?.match("is-style-sme-ordered-list-square")||i?.match("is-style-sme-ordered-list-circle"))&&a?(0,b.jsx)(e,{...t,wrapperProps:{...t.wrapperProps,style:{...t.wrapperProps?.style,counterReset:r?`sme-count ${s+1}`:"sme-count "+(s-1)}}}):(0,b.jsx)(e,{...t})}),"withSnowMonkeyEditorOrderdListOrderdStyles"));const Re=window.wp.blocks,Ne=window.wp.preferences;const Fe="snow-monkey-editor/preferences",Ae=["allowedBlocks","content","templateLock","placeholder"],Me=e=>!(({name:e}={})=>!(0,Re.hasBlockSupport)(e,"snowmonkeyeditor.blockPresets"))(e)&&(!!function(e,t){if(!e||!Object.keys(e).length)return!1;const o=function(e){return(0,Se.applyFilters)("SnowMonkeyEditor.extension.allowedRoles",["administrator","editor","author","contributor"],e)}(t);return 0<e.roles.filter((e=>-1<o.indexOf(e))).length}(snowmonkeyeditor?.currentUser,"block-presets")&&!!(0,Re.getBlockType)(e.name)),Be=(0,_e.createHigherOrderComponent)((e=>((0,y.dispatch)(Ne.store).setDefaults(Fe,{blockPresets:{}}),t=>{if(!Me(t))return(0,b.jsx)(e,{...t});const{name:o,attributes:n,setAttributes:s}=t,[r,a]=(0,f.useState)(void 0),[i,l]=(0,f.useState)(0),c=(0,y.useSelect)((e=>e(Ne.store).get(Fe,"blockPresets")),[]),m=c?.[o],u=(0,Re.getBlockSupport)(o,"snowmonkeyeditor.blockPresets"),p=u?.ignore||[],v=({blockName:e,presetName:t,preset:o})=>(0,b.jsxs)("div",{className:"sme-editor-block-presets__preset",children:[(0,b.jsx)(g.Button,{onClick:()=>{const t=(0,Re.getBlockType)(e),n={};Object.keys(t.attributes).forEach((e=>{n[e]=void 0})),Ae.forEach((e=>{delete n[e],delete o[e]})),p.forEach((e=>{delete n[e],delete o[e]})),s({...n,...o})},variant:"secondary",children:t}),(0,b.jsx)(g.Button,{label:(0,h.__)("Remove this preset","snow-monkey-editor"),onClick:()=>{const o={...c};delete o?.[e]?.[t],(0,y.dispatch)(Ne.store).set(Fe,"blockPresets",o),l(i+1)},variant:"tertiary",children:"x"})]});return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(e,{...t}),(0,b.jsx)(d.InspectorControls,{children:(0,b.jsxs)(g.PanelBody,{title:(0,h.__)("Presets","snow-monkey-editor"),children:[!!m&&!!Object.values(m)&&(0,b.jsx)("div",{className:"sme-editor-block-presets",children:Object.values(m).map(((e,t)=>{const n=Object.keys(m)[t];return(0,b.jsx)(v,{blockName:o,presetName:n,preset:e},t)}))}),(0,b.jsxs)("div",{className:"sme-editor-block-presets-inserter",children:[(0,b.jsx)("h3",{className:"sme-editor-block-presets-inserter__title",children:(0,h.__)("Save current settings as a preset","snow-monkey-editor")}),(0,b.jsxs)("div",{className:"sme-editor-block-presets-inserter__control",children:[(0,b.jsx)(g.TextControl,{__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,value:r||"",placeholder:(0,h.__)("Input the preset name.","snow-monkey-editor"),onChange:e=>a(e)}),(0,b.jsx)(g.Button,{variant:"primary",disabled:!r,onClick:async()=>{const e={...n};Ae.forEach((t=>{delete e[t]})),p.forEach((t=>{delete e[t]}));const t={...c,[o]:{...m,[r]:{...e}}};(0,y.dispatch)(Ne.store).set(Fe,"blockPresets",t),a(void 0)},children:(0,h.__)("Save","snow-monkey-editor")})]})]})]})})]})})),"withInspectorControl");(0,Se.addFilter)("editor.BlockEdit","snow-monkey-editor/block-presets/with-inspector-controls",Be,100),(0,Se.addFilter)("blocks.registerBlockType","snow-monkey-editor/block-presets/support",((e,t)=>{let o=!1;return"core/button"===t?o={ignore:["url","title","text","linkTarget","rel"]}:"core/cover"===t?o={ignore:["url"]}:"core/list"===t?o={ignore:["values"]}:"core/paragraph"!==t&&"core/group"!==t&&"core/columns"!==t&&"core/column"!==t&&"core/heading"!==t||(o=!0),!1===o?e:{...e,supports:{...e.supports,snowmonkeyeditor:{blockPresets:o}}}}))})()})();